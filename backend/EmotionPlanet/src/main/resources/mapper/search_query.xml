<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.project.EmotionPlanet.Dao.SearchDao">

	<select id="tagSelect" parameterType="String"
		resultType="map">
		select name , (select count(*) from feed_tag where feed_tag.tagNo = no) as 'count' 
		from tag
		where name like CONCAT(#{name},'%');
	</select>
	
	<select id="tagDetailSelect" parameterType="String"
		resultType="map">
		select f.no, f.desc, f.date, fi.imgNo, i.imgLink
		from feed f, feed_img fi, img i
		where f.no = fi.feedNo and fi.imgNo = i.no and fi.imgNo = 1 and f.no in (select feedNo from feed_tag  where feed_tag .tagNo = (select no from tag where name = #{name}));
	</select>
	
</mapper>